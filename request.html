<!DOCTYPE HTML>
<!--
  Massively by HTML5 UP
  html5up.net | @ajlkn
  Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>BHP Services – Zgłoszenie</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta
      name="description"
      content="Zgłoś firmę do serwisu BHP: wybierz pakiet START/FIRMA/PRO albo usługę jednorazową. Podaj liczbę pracowników i branżę — wrócimy z konkretem."
    />
    <meta name="robots" content="index,follow" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

    <style>
      .field .error-text {
        display: none;
        margin-top: 0.5rem;
        font-size: 0.9rem;
        line-height: 1.3;
        opacity: 0.9;
      }

      .field.is-error input,
      .field.is-error select,
      .field.is-error textarea {
        border-color: #d11a2a !important;
        box-shadow: 0 0 0 2px rgba(209, 26, 42, 0.15);
      }

      .field.is-error .error-text {
        display: block;
        color: #d11a2a;
      }

      .field.is-ok input,
      .field.is-ok select,
      .field.is-ok textarea {
        border-color: rgba(46, 204, 113, 0.7) !important;
      }

      .consent-row.is-error {
        border: 1px solid #d11a2a;
        border-radius: 6px;
        padding: 0.75rem;
        background: rgba(209, 26, 42, 0.06);
      }

      .hint {
        margin: 0.25em 0 0 0;
        font-size: 0.9em;
        opacity: 0.8;
      }

      .summary {
        text-align: center;
        margin-top: 0.75em;
        display: none;
        opacity: 0.95;
      }
      .summary strong { white-space: nowrap; }
    </style>
  </head>

  <body class="is-preload">
    <div id="wrapper" class="fade-in">

      <header id="header">
        <a href="index.html" class="logo">BHP Services</a>
      </header>

      <nav id="nav">
        <ul class="links">
          <li><a href="index.html">Start</a></li>
          <li><a href="services.html">Pakiety BHP</a></li>
          <li class="active"><a href="request.html">Zgłoszenie</a></li>
          <li><a href="b2b.html">Współpraca B2B</a></li>
          <li><a href="kb/index.html">Baza wiedzy</a></li>
        </ul>
        <ul class="icons">
          <li><a href="tel:+48574889505" class="icon solid fa-phone"><span class="label">Telefon</span></a></li>
          <li><a href="mailto:kontakt@bhp-services.pl" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
        </ul>
      </nav>

      <div id="main">

        <article class="post featured">
          <header class="major">
            <span class="date">Zgłoszenie</span>
            <h1>Zgłoś firmę do serwisu BHP</h1>
            <p>
              Wybierz pakiet albo usługę jednorazową.
              Podaj liczbę pracowników i branżę — wrócimy z konkretem.
            </p>
          </header>

          <ul class="actions special">
            <li><a href="#formularz" class="button primary scrolly">Przejdź do formularza</a></li>
          </ul>
        </article>

        <article class="post" id="formularz">
          <header class="major">
            <h2>Formularz zgłoszenia</h2>
            <p>
              Minimum formalności. Zwykle wracamy z odpowiedzią w 24h.
            </p>
          </header>

          <form id="leadForm" method="post" action="#" novalidate>
            <div class="fields">

              <div class="field">
                <label for="company">Nazwa firmy (opcjonalnie)</label>
                <input type="text" name="company" id="company" placeholder="np. ABC Sp. z o.o." autocomplete="organization" />
              </div>

              <div class="field">
                <label for="name">Imię</label>
                <input type="text" name="name" id="name" placeholder="Twoje imię" autocomplete="given-name" />
              </div>

              <div class="field">
                <label for="phone">Telefon *</label>
                <input type="tel" name="phone" id="phone" placeholder="+48 ___ ___ ___" autocomplete="tel" inputmode="tel" />
                <p class="error-text" data-error-for="phone"></p>
              </div>

              <div class="field">
                <label for="email">Email (opcjonalnie)</label>
                <input type="email" name="email" id="email" placeholder="kontakt@firma.pl" autocomplete="email" />
              </div>

              <div class="field">
                <label for="city">Miasto *</label>
                <input type="text" name="city" id="city" placeholder="np. Płońsk" autocomplete="address-level2" />
                <p class="error-text" data-error-for="city"></p>
                <p class="hint">Na start działamy lokalnie (Płońsk i okolice). W kolejnych miastach rozwijamy sieć partnerów.</p>
              </div>

              <div class="field">
                <label for="industry">Branża *</label>
                <select name="industry" id="industry" required>
                  <option value="">— wybierz —</option>
                  <option value="biuro">Biuro / usługi</option>
                  <option value="handel">Handel</option>
                  <option value="magazyn">Magazyn / logistyka</option>
                  <option value="gastronomia">Gastronomia</option>
                  <option value="budowlanka">Budowlanka / prace techniczne</option>
                  <option value="produkcja">Produkcja / warsztat</option>
                  <option value="inne">Inne (opis w wiadomości)</option>
                </select>
                <p class="error-text" data-error-for="industry"></p>
              </div>

              <div class="field">
                <label for="workers">Liczba pracowników *</label>
                <input type="number" name="workers" id="workers" min="1" placeholder="np. 1, 5, 12" />
                <p class="error-text" data-error-for="workers"></p>
              </div>

              <div class="field">
                <label for="positions">Ile stanowisk pracy? *</label>
                <input type="number" name="positions" id="positions" min="1" placeholder="np. 1, 2, 5" />
                <p class="error-text" data-error-for="positions"></p>
                <p class="hint">Stanowiska = różne role (np. biuro, magazynier, kierowca). Ważne do oceny ryzyka i instrukcji.</p>
              </div>

              <div class="field">
                <label for="offer">Co wybierasz? *</label>
                <select name="offer" id="offer" required>
                  <option value="">— wybierz —</option>
                  <option value="quick">Usługa jednorazowa (300 zł)</option>
                  <option value="start">Pakiet START</option>
                  <option value="firma">Pakiet FIRMA</option>
                  <option value="pro">Pakiet PRO</option>
                  <option value="nie_wiem">Nie wiem — dobierzcie za mnie</option>
                </select>
                <p class="error-text" data-error-for="offer"></p>
                <p class="hint" id="offerHint"></p>
              </div>

              <div class="field">
                <label for="message">Krótki opis (opcjonalnie)</label>
                <textarea name="message" id="message" rows="4" placeholder="Np. zatrudniam 2 osoby, branża usługowa, potrzebuję startu bez chaosu."></textarea>
              </div>

              <div class="field">
                <div class="consent-row" id="consentRow">
                  <input type="checkbox" id="consent" name="consent" value="yes" required />
                  <label for="consent" class="consent-label">
                    Wyrażam zgodę na kontakt w sprawie zgłoszenia. *
                    <span class="consent-note">
                      <a href="privacy.html" target="_blank" rel="noopener">Polityka prywatności</a>
                    </span>
                  </label>
                </div>
                <p class="error-text" data-error-for="consent"></p>
              </div>

            </div>

            <p class="summary" id="priceSummary"></p>

            <ul class="actions special">
              <li><input id="leadSubmit" type="submit" value="Wyślij zgłoszenie" class="primary" /></li>
            </ul>

            <p id="formMsg" style="text-align:center; margin-top:0.75em; display:none;"></p>
          </form>

          <hr />
        </article>
      </div>

      <footer id="footer">
        <section class="split contact">
          <section class="alt">
            <h3>Adres</h3>
            <p>09-100 Płońsk, Szkolna 35A</p>
          </section>
          <section>
            <h3>Telefon</h3>
            <p><a href="tel:+48574889505">+48 574 889 505</a></p>
          </section>
          <section>
            <h3>Email</h3>
            <p><a href="mailto:kontakt@bhp-services.pl">kontakt@bhp-services.pl</a></p>
          </section>
          <section>
            <h3>Dokumenty</h3>
            <p><a href="privacy.html">Polityka prywatności</a></p>
          </section>
        </section>
      </footer>

      <div id="copyright">
        <ul>
          <li>&copy; BHP Services</li>
          <li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
        </ul>
      </div>

    </div>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
      const form = document.getElementById('leadForm');
      const msg  = document.getElementById('formMsg');
      const btn  = document.getElementById('leadSubmit');

      const phoneEl    = document.getElementById('phone');
      const cityEl     = document.getElementById('city');
      const industryEl = document.getElementById('industry');
      const workersEl  = document.getElementById('workers');
      const positionsEl= document.getElementById('positions');
      const offerEl    = document.getElementById('offer');

      const consentEl  = document.getElementById('consent');
      const consentRow = document.getElementById('consentRow');

      const offerHintEl = document.getElementById('offerHint');
      const priceSummaryEl = document.getElementById('priceSummary');

      // PRICES (sync with services.html)
      const PRICES = {
        quick: 300,
        start: 1350,
        firma: 2500,
        pro:   3500
      };

      // LIMITS must match services.html table
      const LIMITS = {
        start: { workers: 5,  positions: 2 },
        firma: { workers: 10, positions: 3 },
        pro:   { workers: 20, positions: 5 }
      };

      // Overages must be < 300 only if "one element" — but we keep them realistic & consistent:
      const OVERAGES = {
        worker: 220,      // szkolenie dodatkowego pracownika
        position: 350     // ocena ryzyka za dodatkowe stanowisko (1 stanowisko)
      };

      const OFFER_HINTS = {
        quick: "Jedna konkretna czynność (min. 300 zł). Dobre na szybki start.",
        start: "Mała firma: limit pracowników i stanowisk + komplet startowy.",
        firma: "Firma rosnąca: większy limit i spokojne wdrożenie.",
        pro:   "Większa firma: najlepsze, gdy jest więcej osób i stanowisk.",
        nie_wiem: "Dobierzemy najlepszą opcję po krótkiej rozmowie."
      };

      function showTopMessage(text) {
        msg.style.display = 'block';
        msg.textContent = text;
      }
      function hideTopMessage() {
        msg.style.display = 'none';
        msg.textContent = '';
      }

      function normalizePhone(raw) {
        const digits = (raw || '').trim().replace(/\D/g, '');
        if (!digits) return null;

        let d = digits;
        if (d.startsWith('0048')) d = d.slice(4);
        if (d.startsWith('48') && d.length === 11) d = d.slice(2);
        if (d.length !== 9) return null;

        return '+48' + d;
      }

      function getFieldWrapper(el) { return el ? el.closest('.field') : null; }

      function setFieldError(fieldEl, message, key) {
        const wrapper = getFieldWrapper(fieldEl);
        if (wrapper) { wrapper.classList.remove('is-ok'); wrapper.classList.add('is-error'); }
        const errorEl = document.querySelector('.error-text[data-error-for="' + key + '"]');
        if (errorEl) errorEl.textContent = message;
      }

      function clearFieldState(fieldEl, key) {
        const wrapper = getFieldWrapper(fieldEl);
        if (wrapper) { wrapper.classList.remove('is-error'); wrapper.classList.add('is-ok'); }
        const errorEl = document.querySelector('.error-text[data-error-for="' + key + '"]');
        if (errorEl) errorEl.textContent = '';
      }

      function setConsentError(message) {
        if (consentRow) consentRow.classList.add('is-error');
        const errorEl = document.querySelector('.error-text[data-error-for="consent"]');
        if (errorEl) errorEl.textContent = message;
      }

      function clearConsentState() {
        if (consentRow) consentRow.classList.remove('is-error');
        const errorEl = document.querySelector('.error-text[data-error-for="consent"]');
        if (errorEl) errorEl.textContent = '';
      }

      function scrollToEl(el) {
        if (!el) return;
        el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        if (typeof el.focus === 'function') el.focus({ preventScroll: true });
      }

      function toInt(el) {
        const v = parseInt((el && el.value) ? el.value : "", 10);
        return Number.isFinite(v) ? v : 0;
      }

      function updateOfferHint() {
        offerHintEl.textContent = OFFER_HINTS[offerEl.value] || "";
      }

      function calcPackageTotal(offer, workers, positions) {
        const base = PRICES[offer] || 0;
        const lim = LIMITS[offer];
        if (!lim) return base;

        const extraWorkers = Math.max(0, workers - lim.workers);
        const extraPositions = Math.max(0, positions - lim.positions);

        // Only count “real” elements: extra worker training + extra risk assessment per position
        const extra = (extraWorkers * OVERAGES.worker) + (extraPositions * OVERAGES.position);
        return base + extra;
      }

      function updatePriceSummary() {
        const offer = offerEl.value;
        const workers = toInt(workersEl);
        const positions = toInt(positionsEl);

        priceSummaryEl.style.display = 'none';
        priceSummaryEl.innerHTML = '';

        if (!offer) return;

        if (offer === 'quick') {
          priceSummaryEl.style.display = 'block';
          priceSummaryEl.innerHTML = 'Wybrano: <strong>Usługa jednorazowa</strong> — <strong>' + PRICES.quick + ' zł</strong>.';
          return;
        }

        if (offer === 'nie_wiem') {
          priceSummaryEl.style.display = 'block';
          priceSummaryEl.innerHTML = 'Wybrano: <strong>Dobierzcie za mnie</strong> — wrócimy z propozycją w 24h.';
          return;
        }

        if (offer === 'start' || offer === 'firma' || offer === 'pro') {
          if (workers > 0 && positions > 0) {
            const total = calcPackageTotal(offer, workers, positions);
            const lim = LIMITS[offer];
            const extraW = Math.max(0, workers - lim.workers);
            const extraP = Math.max(0, positions - lim.positions);

            let details = '';
            if (extraW || extraP) {
              details = ' (nadwyżki: ' +
                (extraW ? (extraW + ' prac. × ' + OVERAGES.worker + ' zł') : '') +
                (extraW && extraP ? ', ' : '') +
                (extraP ? (extraP + ' stan. × ' + OVERAGES.position + ' zł') : '') +
                ')';
            }

            priceSummaryEl.style.display = 'block';
            priceSummaryEl.innerHTML =
              'Szacunkowa kwota: <strong>' + total + ' zł</strong>' + details +
              '<br /><span style="font-size:0.9em; opacity:0.85;">Finalnie potwierdzimy po krótkiej rozmowie (branża i warunki pracy).</span>';
          } else {
            priceSummaryEl.style.display = 'block';
            priceSummaryEl.innerHTML = 'Wpisz liczbę pracowników i stanowisk — pokażemy szacunkową kwotę.';
          }
        }
      }

      function validate() {
        let firstInvalid = null;

        const normalized = normalizePhone(phoneEl.value);
        if (!normalized) {
          setFieldError(phoneEl, 'Wpisz poprawny numer telefonu (PL), np. +48 574 889 505.', 'phone');
          firstInvalid = firstInvalid || phoneEl;
        } else {
          clearFieldState(phoneEl, 'phone');
          phoneEl.value = normalized;
        }

        if (!cityEl.value.trim()) {
          setFieldError(cityEl, 'Wpisz miasto.', 'city');
          firstInvalid = firstInvalid || cityEl;
        } else {
          clearFieldState(cityEl, 'city');
        }

        if (!industryEl.value) {
          setFieldError(industryEl, 'Wybierz branżę.', 'industry');
          firstInvalid = firstInvalid || industryEl;
        } else {
          clearFieldState(industryEl, 'industry');
        }

        const w = toInt(workersEl);
        if (!w || w < 1) {
          setFieldError(workersEl, 'Wpisz liczbę pracowników (min. 1).', 'workers');
          firstInvalid = firstInvalid || workersEl;
        } else {
          clearFieldState(workersEl, 'workers');
        }

        const p = toInt(positionsEl);
        if (!p || p < 1) {
          setFieldError(positionsEl, 'Wpisz liczbę stanowisk (min. 1).', 'positions');
          firstInvalid = firstInvalid || positionsEl;
        } else {
          clearFieldState(positionsEl, 'positions');
        }

        if (!offerEl.value) {
          setFieldError(offerEl, 'Wybierz, co chcesz zamówić.', 'offer');
          firstInvalid = firstInvalid || offerEl;
        } else {
          clearFieldState(offerEl, 'offer');
        }

        if (!consentEl.checked) {
          setConsentError('Zaznacz zgodę na kontakt.');
          firstInvalid = firstInvalid || consentEl;
        } else {
          clearConsentState();
        }

        return { ok: !firstInvalid, firstInvalid };
      }

      phoneEl.addEventListener('input', () => { clearFieldState(phoneEl, 'phone'); hideTopMessage(); });
      cityEl.addEventListener('input', () => { clearFieldState(cityEl, 'city'); hideTopMessage(); });
      industryEl.addEventListener('change', () => { clearFieldState(industryEl, 'industry'); hideTopMessage(); updatePriceSummary(); });
      workersEl.addEventListener('input', () => { clearFieldState(workersEl, 'workers'); hideTopMessage(); updatePriceSummary(); });
      positionsEl.addEventListener('input', () => { clearFieldState(positionsEl, 'positions'); hideTopMessage(); updatePriceSummary(); });

      offerEl.addEventListener('change', () => {
        clearFieldState(offerEl, 'offer');
        hideTopMessage();
        updateOfferHint();
        updatePriceSummary();
      });

      consentEl.addEventListener('change', () => { clearConsentState(); hideTopMessage(); });

      updateOfferHint();
      updatePriceSummary();

      form.addEventListener('submit', function (e) {
        e.preventDefault();

        const res = validate();
        if (!res.ok) {
          showTopMessage('Sprawdź formularz — zaznaczone pola wymagają poprawy.');
          scrollToEl(res.firstInvalid);
          return;
        }

        btn.disabled = true;
        showTopMessage('Dziękujemy! Przekierowujemy…');

        setTimeout(() => {
          window.location.href = 'thank-you.html';
        }, 500);
      });
    </script>
  </body>
</html>
